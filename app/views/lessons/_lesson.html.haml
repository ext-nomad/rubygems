.card.shadow
  .card-header
    - if lesson.viewed(current_user) == true
      .text-success.fa.fa-check-square

    - else
      .text-danger.fa.fa-check-square

    = link_to course_lesson_path(@course, lesson) do
      %b
        #{lesson.row_order_rank + 1}.
      = lesson.title
  .card-body
    - if @lesson.video.attached?
      %video(controls="true" width="100%" preload="metadata" controlslist="nodownload")
        %source{src: rails_blob_url(@lesson.video), type:"#{@lesson.video.content_type}"}

    = lesson.content

  - if current_user && policy(lesson).edit?
    .card-footer
      .text-center
        = link_to edit_course_lesson_path(@course, lesson), class: 'btn btn-sm btn-warning mr-1' do
          .fa.fa-edit
        = link_to [@course, lesson], method: :delete, data: { confirm: t('global.confirmation') }, class: 'btn btn-sm btn-danger' do
          .fa.fa-trash
      - unless lesson.prev.nil?
        .float-left
          = link_to course_lesson_path(@course, lesson.prev), class: 'btn btn-sm btn-info' do
            .fa.fa-arrow-left
            = t('.prev')
      
      - unless lesson.next.nil?
        .float-right
          = link_to course_lesson_path(@course, lesson.next), class: 'btn btn-sm btn-info' do
            = t('.next')
            .fa.fa-arrow-right
