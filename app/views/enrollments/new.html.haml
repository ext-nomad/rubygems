- content_for :title do
  RubyGems
  \|
  New enrollment

.card
  .card-header
    .text-center
      %h3
        .fa.fa-graduation-cap
        = link_to @course.title, course_path(@course)
        %hr
        .fa.fa-lock-open
        Buy course
  .card-body
    .text-center
      - if @course.price.positive?
        = form_tag course_enrollments_path(@course) do
          %script.stripe-button{ 'data-amount' => "#{(@course.price * 100).to_i}",
            'data-description' => "#{@course.title} (#{number_to_currency @course.price})",
            'data-email' => "#{current_user.email}",
            'data-key' => Rails.application.credentials.dig(:stripe, :publishable_key),
            'data-locale' => 'auto',
            :src => 'https://checkout.stripe.com/checkout.js' }
      - else 
        = form_tag course_enrollments_path(@course) do
          = submit_tag "Free of charge", class: 'btn btn-lg btn-success'
    
  .card-footer
    = link_to 'Back', course_path(@course)
